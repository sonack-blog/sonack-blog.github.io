

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="二分法总结">
  <meta name="author" content="sonack">
  <meta name="keywords" content="">
  <meta name="description" content="二分法总结">
<meta property="og:type" content="article">
<meta property="og:title" content="二分法总结">
<meta property="og:url" content="https://sonack.com/2018/11/22/ea9b9ec92520/index.html">
<meta property="og:site_name" content="这次试试能写多久博客">
<meta property="og:description" content="二分法总结">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-11-22T07:43:49.000Z">
<meta property="article:modified_time" content="2018-11-26T08:46:40.023Z">
<meta property="article:author" content="sonack">
<meta name="twitter:card" content="summary_large_image">
  
  <title>二分法总结 - 这次试试能写多久博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"sonack.com","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="这次试试能写多久博客" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Sonack&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/post_header1.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="二分法总结">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2018-11-22 15:43" pubdate>
        2018年11月22日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      14k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      43 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">二分法总结</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2018年11月26日 下午
                
              </p>
            
            <div class="markdown-body">
              <h2 id="二分法总结"><a href="#二分法总结" class="headerlink" title="二分法总结"></a>二分法总结</h2><span id="more"></span>

<hr>
<h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><p>有序数组a(a[0], … a[N-1]), 查找目标值target，维护一个target所在区间[l, r), 每次与中间元素a[m]比较(m=floor((l + r) / 2))，确定target所在区间，且区间长度缩减一半，依次进行，最终在长度为N的数组a中查找target值总共需要<strong>O(logN)<strong>时间复杂度，空间复杂度为</strong>O(1)</strong>.</p>
<h4 id="C-STL-APIs-Usage"><a href="#C-STL-APIs-Usage" class="headerlink" title="C++ STL APIs Usage"></a>C++ STL APIs Usage</h4><figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-comment">// lower_bound/upper_bound example</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span>     <span class="hljs-comment">// std::cout</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span>    <span class="hljs-comment">// std::lower_bound, std::upper_bound, std::sort</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span>       <span class="hljs-comment">// std::vector</span></span><br><br><span class="hljs-comment">// lower_bound 第一个i, a[i] &gt;= t</span><br><span class="hljs-comment">// upper_bound 第一个i, a[i] &gt; t</span><br><span class="hljs-comment">// [lower_bound, upper_bound) </span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span> </span>{<br>  <span class="hljs-keyword">int</span> myints[] = {<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">30</span>,<span class="hljs-number">20</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>,<span class="hljs-number">20</span>};<br>  <span class="hljs-function">std::vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">v</span><span class="hljs-params">(myints,myints+<span class="hljs-number">8</span>)</span></span>;           <span class="hljs-comment">// 10 20 30 30 20 10 10 20</span><br><br>  std::<span class="hljs-built_in">sort</span> (v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());                <span class="hljs-comment">// 10 10 10 20 20 20 30 30</span><br><br>  std::vector&lt;<span class="hljs-keyword">int</span>&gt;::iterator low,up;<br>  low=std::<span class="hljs-built_in">lower_bound</span> (v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">20</span>);<br>  up=std::<span class="hljs-built_in">upper_bound</span> (v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">20</span>);<br>  std::cout &lt;&lt; <span class="hljs-string">"lower_bound at position "</span> &lt;&lt; (low- v.<span class="hljs-built_in">begin</span>()) &lt;&lt; <span class="hljs-string">'\n'</span>;<br>  std::cout &lt;&lt; <span class="hljs-string">"upper_bound at position "</span> &lt;&lt; (up - v.<span class="hljs-built_in">begin</span>()) &lt;&lt; <span class="hljs-string">'\n'</span>;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></div></td></tr></tbody></table></figure>

<h4 id="C-STL-APIs-python-implementations"><a href="#C-STL-APIs-python-implementations" class="headerlink" title="C++ STL APIs python implementations"></a>C++ STL APIs python implementations</h4><p>ref: [<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/3613238]">https://www.zhihu.com/question/3613238]</a></p>
<p>C++ STL <em>lower_bound()</em> python implementation:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># ie. find the smallest i such that a[i] &gt;= value</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lower_bound</span>(<span class="hljs-params">array, first, last, value</span>):</span><br>    <span class="hljs-keyword">while</span> (first &lt; last):<br>        <span class="hljs-comment"># mid = first + ((last - first) &gt;&gt; 1)  注意&gt;&gt;优先级最低，需要加括号</span><br>        <span class="hljs-comment"># 不用(first + last) // 2 防止溢出</span><br>        mid = first + (last - first) // <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> (array[mid] &lt; value):<br>            first = mid + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            last = mid<br>    <span class="hljs-keyword">return</span> first<br></code></pre></div></td></tr></tbody></table></figure>


<p>C++ STL <em>upper_bound()</em> python implementation:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># ie. find the smallest i such that a[i] &gt; value</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">upper_bound</span>(<span class="hljs-params">array, first, last, value</span>):</span><br>    <span class="hljs-keyword">while</span> (first &lt; last):<br>        mid = first + (last - first) // <span class="hljs-number">2</span><br>        <span class="hljs-comment"># 此处看做条件c</span><br>        <span class="hljs-keyword">if</span> (array[mid] &lt;= value):<br>            first = mid + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            last = mid<br>    <span class="hljs-keyword">return</span> first<br></code></pre></div></td></tr></tbody></table></figure>
<h4 id="C-STL-APIs-C-implementations"><a href="#C-STL-APIs-C-implementations" class="headerlink" title="C++ STL APIs C++ implementations"></a>C++ STL APIs C++ implementations</h4><figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lower_bound</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *A, <span class="hljs-keyword">int</span> N, <span class="hljs-keyword">int</span> T)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-keyword">int</span> l=<span class="hljs-number">0</span>, r=N;<br>    <span class="hljs-keyword">while</span>(l&lt;r)<br>    {<br>        <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (A[m] &lt; T)<br>            l = m + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            r = m;<br>    }<br>    <span class="hljs-keyword">return</span> l;<br>}<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">upper_bound</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *A, <span class="hljs-keyword">int</span> N, <span class="hljs-keyword">int</span> T)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-keyword">int</span> l=<span class="hljs-number">0</span>, r=N;<br>    <span class="hljs-keyword">while</span>(l&lt;r)<br>    {<br>        <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (A[m] &lt;= T)  <span class="hljs-comment">// 只有此处不同</span><br>            l = m + <span class="hljs-number">1</span>; <br>        <span class="hljs-keyword">else</span><br>            r = m;<br>    }<br>    <span class="hljs-keyword">return</span> l;<br>}<br><br><span class="hljs-comment">// [l,r] 区间写法</span><br><span class="hljs-comment">// return the first element which &gt;= x</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">LowerBound</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> x)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-comment">//注意right初始化为n-1</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">left</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>, <span class="hljs-title">right</span><span class="hljs-params">(n<span class="hljs-number">-1</span>)</span>, mid</span>;<br>    <span class="hljs-keyword">while</span>(left &lt;= right)  <span class="hljs-comment">// 注意结束判别条件，l&lt;=r 而不是 l&lt;r</span><br>    {<br>        mid = left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span>(a[mid] &lt; x)<br>        {<br>            left = mid + <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">else</span><br>        {<br>            right = mid - <span class="hljs-number">1</span>;  <span class="hljs-comment">// 注意 -1</span><br>        }<br>    }<br>    <span class="hljs-keyword">return</span> left;  <span class="hljs-comment">// left和right不一致，注意要返回left</span><br>}<br><br><span class="hljs-comment">// return first element which &gt; x</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">UpperBound</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> x)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">left</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>, <span class="hljs-title">right</span><span class="hljs-params">(n<span class="hljs-number">-1</span>)</span>, mid</span>;<br>    <span class="hljs-keyword">while</span>(left &lt;= right)<br>    {<br>        mid = left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span>(a[mid] &lt;= x)<br>        {<br>            left = mid + <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">else</span><br>        {<br>            right = mid - <span class="hljs-number">1</span>;<br>        }<br>    }<br>    <span class="hljs-keyword">return</span> left;<br>}<br><br><br><br><br></code></pre></div></td></tr></tbody></table></figure>
<p><strong>总结：</strong></p>
<ol>
<li>无论是<em>lower_bound()<em>还是</em>upper_bound()</em>, 都是返回不满足条件c的最小下标；</li>
<li>return first or last是等价的;</li>
<li>区间表示法为[first, last)。</li>
</ol>
<h3 id="二分答案"><a href="#二分答案" class="headerlink" title="二分答案"></a>二分答案</h3><p>如果一个问题的解是离散的，且范围已知（ie 可以枚举），且判断一个解是否可行的代价较低，且答案具有单调性(ie 如果x是解，则x+i也是解， 如果x不是解，则x-i也不是解（或者反过来）。即满足条件和不满足条件的交界面只有一个，类似于判断条件C，array[i]&lt;value的条件在有序数组内即满足单调性)，则可以采用二分答案的做法来求解。</p>
<h3 id="例题s"><a href="#例题s" class="headerlink" title="例题s"></a>例题s</h3><h4 id="二分搜索"><a href="#二分搜索" class="headerlink" title="二分搜索"></a>二分搜索</h4><p>题目列表Ref: [<a target="_blank" rel="noopener" href="https://blog.csdn.net/linhuanmars/article/details/31354941]">https://blog.csdn.net/linhuanmars/article/details/31354941]</a></p>
<h5 id="Leetcode-35-Search-Insert-Position"><a href="#Leetcode-35-Search-Insert-Position" class="headerlink" title="Leetcode 35. Search Insert Position"></a>Leetcode 35. Search Insert Position</h5><figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-comment">// method 1</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">searchInsert</span><span class="hljs-params">(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>{<br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> n = nums.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">int</span> l=<span class="hljs-number">0</span>, r=n<span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">while</span>(l&lt;=r) <br>    {<br>        <span class="hljs-keyword">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (nums[mid] == target) <span class="hljs-keyword">return</span> mid;<br>        <span class="hljs-keyword">if</span> (nums[mid] &lt; target) l = mid+<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> r = mid<span class="hljs-number">-1</span>;<br>    }<br>    <span class="hljs-keyword">return</span> l;<br>}<br><br><span class="hljs-comment">// method 2 lower_bound</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">searchInsert</span><span class="hljs-params">(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>{<br>    <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = nums.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-keyword">while</span> (l &lt; r)<br>    {<br>        <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (nums[m] &lt; target)<br>            l = m + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            r = m;<br>    }<br>    <span class="hljs-keyword">return</span> l;<br>}<br><br><span class="hljs-comment">// method 3 upper_bound</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">searchInsert</span><span class="hljs-params">(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>{<br>    <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = nums.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-comment">//         the 1st to not obby nums[i] &lt; target, ie nums[i] &gt; target</span><br>    <span class="hljs-keyword">while</span> (l &lt; r)<br>    {<br>        <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (nums[m] &lt;= target)<br>            l = m + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            r = m;<br>    }<br>    <span class="hljs-comment">// 如果找到了则返回下标l-1, 没找到的话插入位置则是l</span><br>    <span class="hljs-keyword">if</span> (l &amp;&amp; nums[l<span class="hljs-number">-1</span>] == target) l--;<br>    <span class="hljs-keyword">return</span> l;<br>}<br></code></pre></div></td></tr></tbody></table></figure>


<h5 id="Leetcode-Search-for-a-Range"><a href="#Leetcode-Search-for-a-Range" class="headerlink" title="Leetcode ?. Search for a Range"></a>Leetcode ?. Search for a Range</h5><figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">lower_bound</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *A, <span class="hljs-keyword">int</span> N, <span class="hljs-keyword">int</span> T)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-keyword">int</span> l=<span class="hljs-number">0</span>, r=N;<br>    <span class="hljs-keyword">while</span>(l&lt;r)<br>    {<br>        <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (A[m] &lt; T)<br>            l = m + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            r = m;<br>    }<br>    <span class="hljs-keyword">return</span> l;<br>}<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">upper_bound</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *A, <span class="hljs-keyword">int</span> N, <span class="hljs-keyword">int</span> T)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-keyword">int</span> l=<span class="hljs-number">0</span>, r=N;<br>    <span class="hljs-keyword">while</span>(l&lt;r)<br>    {<br>        <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (A[m] &lt;= T)<br>            l = m + <span class="hljs-number">1</span>; <br>        <span class="hljs-keyword">else</span><br>            r = m;<br>    }<br>    <span class="hljs-keyword">return</span> l;<br>}<br><br><br><span class="hljs-comment">// return the first element which &gt;= x</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">LowerBound</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> x)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">left</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>, <span class="hljs-title">right</span><span class="hljs-params">(n<span class="hljs-number">-1</span>)</span>, mid</span>;<br>    <span class="hljs-keyword">while</span>(left &lt;= right){<br>        mid = left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span>(a[mid] &lt; x){<br>            left = mid + <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">else</span>{<br>            right = mid - <span class="hljs-number">1</span>;<br>        }<br>    }<br>    <span class="hljs-built_in">printf</span> (<span class="hljs-string">"l=%d, r=%d"</span>,left, right);<br><br>    <span class="hljs-keyword">return</span> left;<br>}<br> <br><span class="hljs-comment">// return first element which &gt; x</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">UpperBound</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> x)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">left</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>, <span class="hljs-title">right</span><span class="hljs-params">(n<span class="hljs-number">-1</span>)</span>, mid</span>;<br>    <span class="hljs-keyword">while</span>(left &lt;= right){<br>        mid = left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span>(a[mid] &lt;= x){<br>            left = mid + <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">else</span>{<br>            right = mid - <span class="hljs-number">1</span>;<br>        }<br>    }<br>    <span class="hljs-keyword">return</span> left;<br>}<br><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-built_in">freopen</span>(<span class="hljs-string">"input.txt"</span>, <span class="hljs-string">"r"</span>, stdin);<br>    <span class="hljs-keyword">int</span> a[<span class="hljs-number">100</span>],N,T;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;N, &amp;T);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>    {<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;a[i]);<br>    }<br>    <span class="hljs-built_in">sort</span>(a,a+N);<br><br>    <span class="hljs-comment">// int lb = lower_bound(a, N, T);</span><br>    <span class="hljs-comment">// int ub = upper_bound(a, N, T);</span><br><br>    <span class="hljs-keyword">int</span> lb = <span class="hljs-built_in">LowerBound</span>(a, N, T);<br>    <span class="hljs-keyword">int</span> ub = <span class="hljs-built_in">UpperBound</span>(a, N, T);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d-%d\n"</span>, lb, ub);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></div></td></tr></tbody></table></figure>

<h5 id="Leetcode-69-Sqrt-x"><a href="#Leetcode-69-Sqrt-x" class="headerlink" title="Leetcode 69. Sqrt(x)"></a>Leetcode 69. Sqrt(x)</h5><figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> {</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// 如果采用[l,r)写法，则r可能会溢出有符号整数的范围</span><br>    <span class="hljs-comment">// 采用[l,r]写法</span><br>    <span class="hljs-comment">// 找到第一个满足m&gt;x/m的m，ie m**2&gt;x的值，</span><br>    <span class="hljs-comment">// 则m-1就是平方&lt;=x的最大整数，即sqrt(x)的整数部分。</span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">mySqrt</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>{<br>        <span class="hljs-keyword">int</span> l = <span class="hljs-number">1</span>, r = x;<br>        <span class="hljs-keyword">while</span>(l&lt;=r)<br>        {<br>            <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span> (m&lt;=x/m)<br>                l = m + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span><br>                r = m - <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">return</span> l<span class="hljs-number">-1</span>;<br>    }<br>    <br>    <span class="hljs-comment">// [l,r)写法，采用了unsigned int防止溢出 </span><br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">mySqrt</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>{<br>        <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> l = <span class="hljs-number">1</span>, r = x+<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span>(l&lt;r)<br>        {<br>            <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span> (m&lt;=x/m)<br>                l = m + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span><br>                r = m;<br>        }<br>        <span class="hljs-keyword">return</span> l<span class="hljs-number">-1</span>;<br>    }<br>};<br></code></pre></div></td></tr></tbody></table></figure>

<p><strong>Notes</strong>:</p>
<ol>
<li>注意m&lt;=x/m的写法，替代了m*m&lt;=x的写法，防止溢出。</li>
</ol>
<h5 id="Leetcode-74-Search-a-2D-Matrix"><a href="#Leetcode-74-Search-a-2D-Matrix" class="headerlink" title="Leetcode 74. Search a 2D Matrix"></a>Leetcode 74. Search a 2D Matrix</h5><p>首先找到第一个元素matrix[i][0]&lt;=target的行i，再在matrix[i]内二分查找target值。时间复杂度为O(logn+logn), ie O(logn).</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> {</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">searchMatrix</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; matrix, <span class="hljs-keyword">int</span> target)</span> </span>{<br>        <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = matrix.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-comment">// 一旦有空行，则返回false</span><br>        <span class="hljs-comment">// []</span><br>        <span class="hljs-keyword">if</span> (r == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-comment">// [[]]</span><br>        <span class="hljs-keyword">if</span>(matrix[<span class="hljs-number">0</span>].<span class="hljs-built_in">size</span>() == <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <br>        <span class="hljs-comment">// [l,r), 查找第一个首元素&gt;target的行</span><br>        <span class="hljs-keyword">while</span> (l &lt; r)<br>        {<br>            <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span> (matrix[m][<span class="hljs-number">0</span>] &lt;= target)<br>                l = m + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span><br>                r = m;<br>        }<br>        <span class="hljs-comment">// select 即为最后一个 &lt;= target的行</span><br>        <span class="hljs-keyword">int</span> select = l - <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// 第一行的首元素都＞target，肯定不存在</span><br>        <span class="hljs-keyword">if</span> (select &lt; <span class="hljs-number">0</span>)<br>        {<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        }<br>        <span class="hljs-comment">// [l,r]</span><br>        l = <span class="hljs-number">0</span>, r = matrix[select].<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">while</span> (l &lt;= r)<br>        {<br>            <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br><br>            <span class="hljs-keyword">if</span> (matrix[select][m] &lt; target)<br>                l = m + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (matrix[select][m] &gt; target)<br>                r = m - <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    }<br>};<br></code></pre></div></td></tr></tbody></table></figure>

<h5 id="Leetcode-33-Search-in-Rotated-Sorted-Array"><a href="#Leetcode-33-Search-in-Rotated-Sorted-Array" class="headerlink" title="Leetcode 33. Search in Rotated Sorted Array"></a>Leetcode 33. Search in Rotated Sorted Array</h5><p>因为没有重复元素，所以原始数组一定严格单调递增。<br>可以根据a[m]与a[r]的大小关系，判断单调部分是[l,m]还是[m,r]（两者必然存在一个单调，因为断点只有一个，根据鸽巢定理)，再根据情况进行二分即可。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> {</span><br><span class="hljs-keyword">public</span>:   <br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">search</span><span class="hljs-params">(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>{<br>        <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = nums.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>;<br>        <span class="hljs-comment">// [l,r]</span><br>        <span class="hljs-keyword">while</span> (l&lt;=r)<br>        {<br>            <span class="hljs-keyword">int</span> m = (l + r) / <span class="hljs-number">2</span>; <br>            <span class="hljs-comment">// 直接找到</span><br>            <span class="hljs-keyword">if</span> (nums[m] == target) <span class="hljs-keyword">return</span> m;<br>            <span class="hljs-comment">// [m,r]一定单调</span><br>            <span class="hljs-keyword">if</span> (nums[m] &lt; nums[r])<br>            {<br>                <span class="hljs-comment">// 判断是否在右侧</span><br>                <span class="hljs-keyword">if</span> (nums[m] &lt; target &amp;&amp; nums[r] &gt;= target)<br>                    l = m+<span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">else</span><br>                    r = m<span class="hljs-number">-1</span>;<br>            } <span class="hljs-comment">// nums[m] &gt; nums[r], 断点在右侧，左侧[l,m]一定单调</span><br>            <span class="hljs-keyword">else</span><br>            {<br>                <span class="hljs-comment">// 判断target是否在左侧</span><br>                <span class="hljs-keyword">if</span> (nums[l] &lt;= target &amp;&amp; nums[m] &gt; target)<br>                    r = m<span class="hljs-number">-1</span>;<br>                <span class="hljs-keyword">else</span> <span class="hljs-comment">// 否则在右侧</span><br>                    l = m+<span class="hljs-number">1</span>;<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    }<br>};<br></code></pre></div></td></tr></tbody></table></figure>

<h5 id="Leetcode-81-Search-in-Rotated-Sorted-Array-II"><a href="#Leetcode-81-Search-in-Rotated-Sorted-Array-II" class="headerlink" title="Leetcode 81. Search in Rotated Sorted Array II"></a>Leetcode 81. Search in Rotated Sorted Array II</h5><p>有重复元素，可能只是非递减序列，无法再根据a[m]和a[r]的大小关系判断非递减部分，eg [2 2 2 2 2 3] rotate to [2 3 | 2 2 2 2] (a[m]=2=a[r],断点在左侧，右侧非递减) 或者 rotate to [2 2 2 2 3 | 2] (a[m]=2=a[r], 断点在右侧，左侧非递减)，但是当a[m]&lt;a[r]时，还是可以判断出来断点一定在左边的，因为在右边的话，只能有a[m]&gt;=a[r]，同理当a[m]&gt;a[r]时，单调区间为[l,m].如果a[m]与a[r]相等，则r–，因为无法判断，且a[r]!=target(a[m]!=target已经判断过了)肯定不是答案，缩减问题规模1个单位，最坏时间复杂度为O(n).</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> {</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">search</span><span class="hljs-params">(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> target)</span> </span>{<br>        <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (l &lt;= r)<br>        {<br>            <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span> (nums[m] == target)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">if</span> (nums[m] &lt; nums[r])<br>            {<br>                <span class="hljs-keyword">if</span> (nums[m] &lt; target &amp;&amp; target &lt;= nums[r])<br>                    l = m + <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">else</span><br>                    r = m - <span class="hljs-number">1</span>;<br>            }<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nums[m] &gt; nums[r])<br>            {<br>                <span class="hljs-keyword">if</span> (nums[l] &lt;= target &amp;&amp; target &lt; nums[m])<br>                    r = m - <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">else</span><br>                    l = m + <span class="hljs-number">1</span>;<br>            }<br>            <span class="hljs-keyword">else</span><br>            {<br>                r--;<br>            }<br>            <br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    }<br><br></code></pre></div></td></tr></tbody></table></figure>

<h5 id="洛谷-P1024-一元三次方程求解"><a href="#洛谷-P1024-一元三次方程求解" class="headerlink" title="洛谷 P1024 一元三次方程求解"></a>洛谷 P1024 一元三次方程求解</h5><p>已知根与根之间距离&gt;=1，因此只要用长度为1的区间去二分求解即可，注意区间端点重叠可能会重复答案，因此在挪动区间时需要加一个小eps防止答案在端点处被求解两次。也可以根据答案求解情况挪动区间。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">double</span> eps = <span class="hljs-number">1e-4</span>;<br><span class="hljs-keyword">double</span> interval_width = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">double</span> A,B,C,D;<br><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-keyword">return</span> A*x*x*x+B*x*x+C*x+D;<br>}<br><br><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">get_ans</span><span class="hljs-params">(<span class="hljs-keyword">double</span> l, <span class="hljs-keyword">double</span> r)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-comment">// printf("(l=%lf, r=%lf)", l,r);</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">f</span>(l) * <span class="hljs-built_in">f</span>(r) &gt; <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">9999</span>;<br>    <span class="hljs-keyword">while</span>(r-l&gt;eps)<br>    {<br>        <span class="hljs-keyword">double</span> m = (l+r) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">f</span>(m) * <span class="hljs-built_in">f</span>(l) &lt;=<span class="hljs-number">0</span>)<br>            r = m;<br>        <span class="hljs-keyword">else</span><br>            l = m;<br>    }<br>    <span class="hljs-keyword">return</span> (l+r)/<span class="hljs-number">2</span>;<br>}<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-comment">// freopen("input.txt", "r", stdin);</span><br>    vector&lt;<span class="hljs-keyword">double</span>&gt; ans;<br>    <span class="hljs-keyword">double</span> l = <span class="hljs-number">-100</span>;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lf%lf%lf%lf"</span>, &amp;A, &amp;B, &amp;C, &amp;D);<br>    <span class="hljs-keyword">while</span>(l&lt;<span class="hljs-number">100</span>)<br>    {<br>        <span class="hljs-keyword">double</span> solu = <span class="hljs-built_in">get_ans</span>(l, l+interval_width);<br>        <span class="hljs-keyword">if</span> (solu &lt; <span class="hljs-number">101</span>)<br>        {<br>            ans.<span class="hljs-built_in">push_back</span>(solu);<br>            <span class="hljs-comment">// printf("%.2lf", solu);</span><br>        }<br><br>        l+=interval_width+eps;<br>    }<br><br>    <span class="hljs-built_in">sort</span>(ans.<span class="hljs-built_in">begin</span>(), ans.<span class="hljs-built_in">end</span>());<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;ans.<span class="hljs-built_in">size</span>();i++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%.2f "</span>, ans[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></div></td></tr></tbody></table></figure>

<h4 id="二分答案-1"><a href="#二分答案-1" class="headerlink" title="二分答案"></a>二分答案</h4><h5 id="POJ-3258-跳石头-River-Hopscotch"><a href="#POJ-3258-跳石头-River-Hopscotch" class="headerlink" title="POJ 3258 跳石头 River Hopscotch"></a>POJ 3258 跳石头 River Hopscotch</h5><p>最短跳跃距离最大–最小值最大问题</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">int</span> L, m, n;<br><span class="hljs-keyword">int</span> a[<span class="hljs-number">50010</span>];<br><span class="hljs-comment">// 判断最短距离不少于x是否可以达到</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-keyword">int</span> last = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> moves = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;=n;i++)<br>    {<br>        <span class="hljs-keyword">if</span> (a[i+<span class="hljs-number">1</span>] - last &lt; x) <span class="hljs-comment">// 太近了，需要搬石头</span><br>        {<br>            moves++;<br>        }<br>        <span class="hljs-keyword">else</span><br>        {<br>            last = a[i+<span class="hljs-number">1</span>];<br>        }<br>    }<br>    <span class="hljs-keyword">if</span> (moves &gt; m)<br>    {<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    }<br>    <span class="hljs-keyword">else</span><br>    {<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    }<br>}<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-comment">// freopen("input.txt", "r", stdin);</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d"</span>, &amp;L, &amp;n, &amp;m);<br>    a[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;a[i]);<br>    a[n+<span class="hljs-number">1</span>] = L;<br>    <span class="hljs-built_in">sort</span>(a, a+n+<span class="hljs-number">2</span>);<br>    <span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = L + <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// 第一个不满足check(m)的m值，即第一个不能达到最短距离&gt;=m的m，即第一个无法使所有最短距离都&gt;=m的m,则m-1就是最大的最小值</span><br>    <span class="hljs-keyword">while</span> (l &lt; r)<br>    {<br>        <span class="hljs-keyword">int</span> m = l + ((r - l) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-comment">// printf ("%d,%d,%d\n", l, r, m);</span><br>        <span class="hljs-comment">// 最短距离&gt;=m可以达到</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(m))<br>        {<br>            l = m + <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">else</span><br>        {<br>            r = m;<br>        }<br>    }<br>    <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%d"</span>, l - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></div></td></tr></tbody></table></figure>

<h5 id="洛谷-P1182-数列分段"><a href="#洛谷-P1182-数列分段" class="headerlink" title="洛谷 P1182 数列分段"></a>洛谷 P1182 数列分段</h5><p>42451 [42][45][1]<br>每段和最大值最小</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">int</span> N, M;<br><span class="hljs-keyword">int</span> a[<span class="hljs-number">100010</span>]; <br><br><span class="hljs-comment">// 判断每段和都&lt;=x, 即最大值&lt;=x是否可行</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">judge</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> cur_sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> part_cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;N)<br>    {   <br>        <span class="hljs-keyword">if</span> (a[i] &gt; x) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        cur_sum += a[i++];<br>        <span class="hljs-keyword">if</span> (cur_sum &gt; x)<br>        {<br>            i--;<br>            cur_sum = <span class="hljs-number">0</span>;<br>            part_cnt++;<br>        }<br>    }<br>    <span class="hljs-keyword">if</span> (cur_sum)<br>        part_cnt++;<br>    <span class="hljs-keyword">if</span> (part_cnt &gt; M)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>}<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-comment">// freopen("input.txt","r",stdin);</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;N, &amp;M);<br>    <span class="hljs-keyword">int</span> l = <span class="hljs-number">-1</span>, r = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;N;i++)<br>    {<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;a[i]);<br>        r += a[i];<br>        l = <span class="hljs-built_in">max</span>(l, a[i]);<br>    }<br>    r++;<br>    <span class="hljs-comment">// 满足judge(m)的最小的m</span><br>    <span class="hljs-keyword">while</span>(l &lt; r)<br>    {<br>        <span class="hljs-keyword">int</span> m = l + ((r - l) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">judge</span>(m))<br>        {<br>            r = m;<br>        }<br>        <span class="hljs-keyword">else</span><br>        {<br>            l = m+<span class="hljs-number">1</span>;<br>        }<br><br>    }<br>    <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%d"</span>, l);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></div></td></tr></tbody></table></figure>

<h5 id="洛谷-P1577-切绳子"><a href="#洛谷-P1577-切绳子" class="headerlink" title="洛谷 P1577 切绳子"></a>洛谷 P1577 切绳子</h5><figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">int</span> N, K;<br><span class="hljs-keyword">int</span> a[<span class="hljs-number">10010</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">judge</span><span class="hljs-params">(<span class="hljs-keyword">int</span> m)</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;N; i++)<br>    {<br>        cnt += a[i] / m;<br>    }<br>    <span class="hljs-keyword">if</span> (cnt &gt;= K) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-comment">// freopen("input.txt", "r", stdin);</span><br>    <span class="hljs-keyword">int</span> l=<span class="hljs-number">0</span>, r=<span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">double</span> inp;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>,&amp;N,&amp;K);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;N;i++)<br>    {<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lf"</span>,&amp;inp);<br>        a[i] = <span class="hljs-built_in"><span class="hljs-keyword">int</span></span>(inp * <span class="hljs-number">100000</span>);<br>        r = <span class="hljs-built_in">max</span>(r, a[i]);<br>    }<br>    <span class="hljs-keyword">while</span>(l&lt;r)<br>    {<br>        <span class="hljs-keyword">double</span> m = l + ((r - l) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">judge</span>(m))<br>        {<br>            l = m + <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">else</span><br>        {<br>            r = m;<br>        }<br>    }<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%.2lf"</span>, (l<span class="hljs-number">-1</span>)/<span class="hljs-number">100000.0</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></div></td></tr></tbody></table></figure>

<h5 id="CodeForces-660C-Hard-Process"><a href="#CodeForces-660C-Hard-Process" class="headerlink" title="CodeForces 660C. Hard Process"></a>CodeForces 660C. Hard Process</h5><blockquote>
<p>给定n个01元素的数组，每次操作可以将一个0变为1，求最多经过K次操作最长的连续的1的个数。</p>
</blockquote>
<p><strong>最简单的方法0</strong><br>O(n^2)<br>枚举区间的左右端点[l, r], 如果其中0的个数&lt;=K, 则可以经过不超过K次将其全变为1，ans = max(ans, r - l + 1).<br>判断0的个数，可以用前缀和O(1)时间完成。<br><strong>方法1</strong><br>O(nlogn)<br>只枚举左端点l，右端点r即满足Zeros([l, idx])&lt;=k的最大的idx，可以二分答案。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdio&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">int</span> K, N, a[<span class="hljs-number">300010</span>], presum[<span class="hljs-number">300010</span>];<br><br><span class="hljs-comment">// NlogN</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-comment">// freopen("input.txt", "r", stdin);</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;N, &amp;K);<br>    presum[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;N; i++)<br>    {<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;a[i]);<br>        presum[i+<span class="hljs-number">1</span>] = a[i] + presum[i];<br>    }<br><br>    <span class="hljs-keyword">int</span> ans = <span class="hljs-number">-1</span>, ans_l;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> L = <span class="hljs-number">0</span>; L &lt; N; ++L)<br>    {<br>        <span class="hljs-keyword">int</span> r = N, l = L;<br>        <span class="hljs-keyword">while</span>(l &lt; r)<br>        {<br>            <span class="hljs-keyword">int</span> m = l + (r - l) / <span class="hljs-number">2</span>;<br>            <span class="hljs-comment">// 判断0的个数&lt;=K</span><br>            <span class="hljs-keyword">if</span> (m - L + <span class="hljs-number">1</span> - (presum[m+<span class="hljs-number">1</span>] - presum[L]) &lt;= K)<br>                l = m + <span class="hljs-number">1</span>;   <span class="hljs-comment">// 主要看+1在哪  l-1满足条件, r不满足</span><br>            <span class="hljs-keyword">else</span><br>                r = m;<br>        }<br>        <span class="hljs-comment">// l/r即第一个不满足条件的, 即0的个数&gt;K, 即[L, r-1]</span><br>        <span class="hljs-keyword">if</span> (r - L &gt; ans)<br>        {<br>            ans = r - L;<br>            ans_l = L;<br>        }<br><br>    }<br>    <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%d\n"</span>, ans);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;N;i++)<br>    {<br>        <span class="hljs-keyword">if</span> (i &gt;= ans_l &amp;&amp; i &lt; ans + ans_l)<br>            <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%d"</span>, <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%d"</span>, a[i]);<br>        <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%c"</span>, i==N<span class="hljs-number">-1</span>?<span class="hljs-string">'\n'</span>:<span class="hljs-string">' '</span>);<br>    }<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></div></td></tr></tbody></table></figure>
<p><strong>方法2</strong><br>滑动窗口[l, r)，枚举l, r根据l的右移一定要右移，r是l经过K个0后延伸到最右的边界+1，注意r一直在增加，且最大值为N，因此时间复杂度为O(n)，记录滑动窗口的最大宽度(r - l)即可。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>{<br>    <span class="hljs-comment">// freopen("input.txt", "r", stdin);</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;N, &amp;K);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;N; i++)<br>    {<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;a[i]);<br>    }<br>    <span class="hljs-keyword">int</span> zeros = <span class="hljs-number">0</span>;<br>    pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; ans = <span class="hljs-built_in">make_pair</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> l = <span class="hljs-number">0</span>, r = <span class="hljs-number">0</span>; l &lt; N; ++l)<br>    {<br>        <span class="hljs-comment">// 循环后，r指向加上即&gt;K的位置</span><br>        <span class="hljs-keyword">while</span>(r &lt; N &amp;&amp; (zeros + (a[r] == <span class="hljs-number">0</span>)) &lt;= K) <br>        {<br>            zeros += (a[r] == <span class="hljs-number">0</span>);<br>            r++;<br>        }<br>        ans = <span class="hljs-built_in">max</span>(ans, <span class="hljs-built_in">make_pair</span>(r-l, l));<br>        zeros -= a[l] == <span class="hljs-number">0</span>;<br>    }<br>    <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%d\n"</span>, ans.first);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;N;i++)<br>    {<br>        <span class="hljs-comment">// printf ("i=%d ", i);</span><br>        <span class="hljs-keyword">if</span> (i &gt;= ans.second &amp;&amp; i &lt; ans.first + ans.second)<br>            <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%d"</span>, <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%d"</span>, a[i]);<br>        <span class="hljs-built_in">printf</span> (<span class="hljs-string">"%c"</span>, i==N<span class="hljs-number">-1</span>?<span class="hljs-string">'\n'</span>:<span class="hljs-string">' '</span>);<br>    }<br>    <span class="hljs-comment">// printf ("%d %d", ans.second, ans.first+ans.second-1);</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></div></td></tr></tbody></table></figure>

<p><strong>Notes:</strong></p>
<ol>
<li>注意pair的使用。</li>
</ol>
<h5 id="POJ-3111-K-Best"><a href="#POJ-3111-K-Best" class="headerlink" title="POJ 3111 K Best"></a>POJ 3111 K Best</h5><p>平均值最大化</p>
<h5 id="51nod1105-第K大的数"><a href="#51nod1105-第K大的数" class="headerlink" title="51nod1105 第K大的数"></a>51nod1105 第K大的数</h5><p>第K大的数</p>
<p>注意判断大于x的数的个数时，可以再次使用二分直接找到分界点。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2018/11/23/a86c0bd5a2c4/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">贪心法总结</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script type="text/javascript">
        var disqus_config = function() {
          this.page.url = 'https://sonack.com/2018/11/22/ea9b9ec92520/';
          this.page.identifier = '/2018/11/22/ea9b9ec92520/';
        };
        Fluid.utils.loadComments('#disqus_thread', function() {
          var d = document, s = d.createElement('script');
          s.src = '//' + 'sonack-1' + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', new Date());
          (d.head || d.body).appendChild(s);
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
